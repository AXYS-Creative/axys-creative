<!-- prettier-ignore -->
{% set size = panel_configs.size or 'full'%}
{% set nav = scroll_stack_data.nav %}
{% set copy = scroll_stack_data.copy %}
{% set panel_configs = scroll_stack_data.panel_configs %}
{% set panels = scroll_stack_data.panels %}

<section
  class="
  scroll-stack 
  scroll-stack--{{ panel_configs.size }} 
  scroll-stack--{{ panel_configs.placement }}
  "
  id="section-benefits"
>
  <!-- prettier-ignore -->
  {% if copy %}
  <div class="scroll-stack__copy scroll-stack__copy--unpinned">
    {% if copy.title %}
    <h2 class="scroll-stack__copy-title">
      <span>Member</span>
      <span class="glitch-scroll color--benefits"> benefits </span>
    </h2>
    {% endif %} {% if copy.desc %}
    <p class="scroll-stack__copy-desc">{{ copy.desc | safe }}</p>
    {% endif %} {% if copy.cta_1 %}
    <!-- prettier-ignore -->
    {% set cta_1 = copy.cta_1 %}
      {% set cta_2 = copy.cta_2 %}
      {% include "../components/cta-group.njk" %}
      {% endif %}
  </div>
  {% endif %}

  <div class="scroll-stack__pin">
    {% if nav %}
    <nav class="scroll-stack__nav">
      {% for panel in panel_data %}
      <a
        href="#scroll-stack__pin-step-{{ loop.index }}"
        class="scroll-stack__nav-link classic-link tab-element-page"
      >
        {{ panel.title }}
      </a>
      {% endfor %}
    </nav>
    {% endif %}

    <!-- prettier-ignore -->
    {% if copy %}
    <div class="scroll-stack__copy scroll-stack__copy--pinned">
      {% if copy.title %}
      <h2 class="scroll-stack__copy-title">
        <span>Member</span>
        <span
          class="glitch-scroll color--benefits"
          data-glitch-trigger=".scroll-stack"
          data-glitch-start="top center"
          data-glitch-end="bottom center"
        >
          benefits
        </span>
      </h2>
      {% endif %} {% if copy.desc %}
      <p class="scroll-stack__copy-desc">{{ copy.desc | safe }}</p>
      {% endif %} {% if copy.cta_1 %}
      <!-- prettier-ignore -->
      {% set cta_1 = copy.cta_1 %}
      {% set cta_2 = copy.cta_2 %}
      {% include "../components/cta-group.njk" %}
      {% endif %}
    </div>
    {% endif %}

    <!-- prettier-ignore -->
    {% for panel in panels %}
    <div class="scroll-stack__panel scroll-stack__panel-{{ loop.index }}">
      {% if panel.icon %}
      <span
        class="scroll-stack__panel__icon mask-icon"
        style="mask-image: url('{{ panel.icon }}')"
      ></span>
      {% endif %} {% if panel.title %}
      <h3 class="scroll-stack__panel__title h5">
        {{ panel.title }}
      </h3>
      {% endif %} {% if panel.desc %}
      <p class="scroll-stack__panel__desc">{{ panel.desc }}</p>
      {% endif %} {% if panel.cta_1 %}
      <!-- prettier-ignore -->
      {% set cta_1 = panel.cta_1 %}
      {% set cta_2 = null %}
      {% include "../components/cta-group.njk" %}
      {% endif %}
    </div>
    {% endfor %}
  </div>

  <!-- prettier-ignore -->
  <div class="scroll-stack__pin-steps pin-steps" aria-hidden="true">
    {% for step in panels %}
    <div 
      class="scroll-stack__pin-step scroll-stack__pin-step-{{ loop.index }} pin-step"
      id="scroll-stack__pin-step-{{ loop.index }}"
    >
    </div>
    {% endfor %}
   </div>
</section>
